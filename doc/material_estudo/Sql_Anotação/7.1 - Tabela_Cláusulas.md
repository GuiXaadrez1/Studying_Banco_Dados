# üìö PostgreSQL ‚Äî Principais Cl√°usulas SQL

Este guia re√∫ne **todas as cl√°usulas fundamentais** que voc√™ precisa dominar em SQL no PostgreSQL, com **exemplos reais** e **observa√ß√µes pr√°ticas**.

---

## üóÇÔ∏è √çndice

1. [SELECT](#select)
2. [FROM](#from)
3. [WHERE](#where)
4. [GROUP BY](#group-by)
5. [HAVING](#having)
6. [ORDER BY](#order-by)
7. [LIMIT](#limit)
8. [OFFSET](#offset)
9. [JOIN](#join)
10. [UNION](#union)
11. [EXCEPT](#except)
12. [INTERSECT](#intersect)
13. [DISTINCT](#distinct)
14. [CASE](#case)
15. [WITH (CTE)](#with-cte)
16. [INSERT INTO](#insert-into)
17. [UPDATE](#update)
18. [DELETE](#delete)

---

## 1Ô∏è‚É£ SELECT

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `SELECT` | Define quais colunas ou express√µes retornar. | `SELECT nome, salario FROM funcionarios;` | Pode usar `*` (todas as colunas), express√µes, fun√ß√µes e aliases. |

---

## 2Ô∏è‚É£ FROM

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `FROM` | Fonte dos dados (tabela, view, CTE, subquery). | `SELECT * FROM vendas;` | √â poss√≠vel usar alias: `FROM vendas v`. |

---

## 3Ô∏è‚É£ WHERE

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `WHERE` | Filtra linhas pela condi√ß√£o booleana. | `SELECT * FROM produtos WHERE preco > 100;` | N√£o permite agrega√ß√µes diretas (`SUM`, `AVG`); use `HAVING` para isso. |

---

## 4Ô∏è‚É£ GROUP BY

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `GROUP BY` | Agrupa linhas por coluna(s). | `SELECT categoria, COUNT(*) FROM produtos GROUP BY categoria;` | Todas as colunas **n√£o agregadas** devem estar no `GROUP BY`. |

---

## 5Ô∏è‚É£ HAVING

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `HAVING` | Filtra grupos ap√≥s `GROUP BY`. | `SELECT categoria, COUNT(*) FROM produtos GROUP BY categoria HAVING COUNT(*) > 10;` | Diferente do `WHERE` que filtra linhas, o `HAVING` filtra **grupos**. |

---

## 6Ô∏è‚É£ ORDER BY

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `ORDER BY` | Ordena o resultado. | `SELECT * FROM clientes ORDER BY nome ASC;` | Pode usar `ASC` (crescente, padr√£o) ou `DESC` (decrescente). |

---

## 7Ô∏è‚É£ LIMIT

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `LIMIT` | Limita o n¬∫ de linhas retornadas. | `SELECT * FROM vendas LIMIT 5;` | Muito usado para pagina√ß√£o ou testes. |

---

## 8Ô∏è‚É£ OFFSET

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `OFFSET` | Pula um n¬∫ de linhas antes de retornar. | `SELECT * FROM vendas LIMIT 5 OFFSET 10;` | Usado junto com `LIMIT` para pagina√ß√£o (ex.: p√°gina 3 = OFFSET 10 LIMIT 5). |

---

## 9Ô∏è‚É£ JOIN

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `JOIN` | Junta tabelas. | `SELECT * FROM vendas JOIN clientes ON vendas.cliente_id = clientes.id;` | Tipos: `INNER JOIN`, `LEFT JOIN`, `RIGHT JOIN`, `FULL JOIN`, `CROSS JOIN`. |

---

## üîé Tipos de JOIN

| Tipo | O que faz |
|------|------------|
| `INNER JOIN` | Retorna s√≥ linhas com correspond√™ncia em ambas tabelas. |
| `LEFT JOIN` | Retorna tudo da esquerda + correspond√™ncias da direita. |
| `RIGHT JOIN` | Retorna tudo da direita + correspond√™ncias da esquerda. |
| `FULL JOIN` | Retorna tudo de ambos os lados, mesmo sem match. |
| `CROSS JOIN` | Produto cartesiano (todas combina√ß√µes). |

---

## üîü UNION

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `UNION` | Une resultados de duas queries. | `SELECT nome FROM clientes UNION SELECT nome FROM fornecedores;` | Remove duplicados. Use `UNION ALL` para permitir duplicados. |

---

## 11Ô∏è‚É£ EXCEPT

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `EXCEPT` | Retorna linhas da 1¬™ query **n√£o presentes** na 2¬™. | `SELECT nome FROM clientes EXCEPT SELECT nome FROM fornecedores;` | √â como `MINUS` em outros SGBDs. |

---

## 12Ô∏è‚É£ INTERSECT

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `INTERSECT` | Retorna linhas comuns √†s queries. | `SELECT nome FROM clientes INTERSECT SELECT nome FROM fornecedores;` | Encontra interse√ß√£o. |

---

## 13Ô∏è‚É£ DISTINCT

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `DISTINCT` | Remove linhas duplicadas. | `SELECT DISTINCT cidade FROM clientes;` | `DISTINCT ON` existe no PostgreSQL para agrupar com regra espec√≠fica. |

---

## 14Ô∏è‚É£ CASE

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `CASE` | Condicional dentro do `SELECT`. | `SELECT nome, CASE WHEN ativo THEN 'Sim' ELSE 'N√£o' END FROM clientes;` | Usado para construir l√≥gicas inline. |

---

## 15Ô∏è‚É£ WITH (CTE)

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `WITH` | Common Table Expression (CTE). Subquery nomeada. | `WITH vendas_mes AS (SELECT * FROM vendas WHERE EXTRACT(MONTH FROM data) = 7) SELECT * FROM vendas_mes;` | Permite queries leg√≠veis, aninhadas, recursivas. |

---

## 16Ô∏è‚É£ INSERT INTO

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `INSERT INTO` | Insere dados na tabela. | `INSERT INTO clientes (nome, email) VALUES ('Jo√£o', 'joao@email.com');` | Pode usar `RETURNING *` para retornar a linha inserida. |

---

## 17Ô∏è‚É£ UPDATE

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `UPDATE` | Atualiza dados existentes. | `UPDATE clientes SET ativo = FALSE WHERE id = 5;` | Sempre combine `UPDATE` com `WHERE` ‚Äî sem `WHERE` afeta tudo! |

---

## 18Ô∏è‚É£ DELETE

| Cl√°usula | Descri√ß√£o | Exemplo | Observa√ß√£o |
|----------|-----------|---------|------------|
| `DELETE` | Remove linhas da tabela. | `DELETE FROM clientes WHERE id = 10;` | Assim como `UPDATE`, cuidado: sem `WHERE` apaga tudo! |

